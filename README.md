<div align="center">

<a href="http://marsview.cc/"><img src="https://marsview.cdn.bcebos.com/mars-logo.png" width="150" alt="marsview logo"></a>

# Marsview ä½ä»£ç å¹³å°

è®©æ­å»ºæ›´ç®€å•ï¼Œè®©å¼€å‘æ›´é«˜æ•ˆ

[é¡¹ç›®æ–‡æ¡£](http://docs.marsview.cc/) |
[å¼€æºä»“åº“](https://github.com/JackySoft/marsview) |
[äº¤æµç¾¤](https://imgcloud.cdn.bcebos.com/f35323e9a2625a85909cb6f02.png)

</div>

<div align="center">

![GitHub Repo stars](https://img.shields.io/github/stars/JackySoft/marsview)

![GitHub package.json version](https://img.shields.io/github/package-json/v/JackySoft/marsview)
![GitHub License](https://img.shields.io/github/license/JackySoft/marsview)
![version](https://img.shields.io/npm/v/amis)
![language](https://img.shields.io/github/languages/top/JackySoft/marsview)
![last](https://img.shields.io/github/last-commit/JackySoft/marsview.svg)

[English](./README.md) | ä¸­æ–‡

</div>

## ä»‹ç» ğŸš€

Marsview æ˜¯ä¸€æ¬¾ä¸­åå°æ–¹å‘çš„ä½ä»£ç å¯è§†åŒ–æ­å»ºå¹³å°ï¼Œå¼€å‘è€…å¯ä»¥åœ¨å¹³å°ä¸Šåˆ›å»ºé¡¹ç›®ã€é¡µé¢å’Œç»„ä»¶ï¼Œæ”¯æŒäº‹ä»¶äº¤äº’ã€æ¥å£è°ƒç”¨ã€æ•°æ®è”åŠ¨å’Œé€»è¾‘ç¼–æ’ç­‰ï¼Œå¼€å‘è€…è¿˜å¯é€šè¿‡å¾®å‰ç«¯æ¡†æ¶ microApp å¿«é€Ÿé›†æˆåˆ°è‡ªå·±çš„ä¸šåŠ¡ç³»ç»Ÿä¸­ã€‚

## åœ¨çº¿ä½¿ç”¨ ğŸ›¸

- ğŸŒ [Marsview](http://www.marsview.cc/)

|                                                                        |                                                                        |
| ---------------------------------------------------------------------- | ---------------------------------------------------------------------- |
| ![Demo](https://imgcloud.cdn.bcebos.com/09d56ca14e47f7880d67bae37.png) | ![Demo](https://imgcloud.cdn.bcebos.com/09d56ca14e47f7880d67bae38.png) |
| ![Demo](https://imgcloud.cdn.bcebos.com/09d56ca14e47f7880d67bae39.png) | ![Demo](https://imgcloud.cdn.bcebos.com/09d56ca14e47f7880d67bae3a.png) |
| ![Demo](https://imgcloud.cdn.bcebos.com/09d56ca14e47f7880d67bae3b.png) | ![Demo](https://imgcloud.cdn.bcebos.com/09d56ca14e47f7880d67bae3c.png) |
| ![Demo](https://imgcloud.cdn.bcebos.com/09d56ca14e47f7880d67bae3d.png) | ![Demo](https://imgcloud.cdn.bcebos.com/09d56ca14e47f7880d67bae3e.png) |

## ç‰¹è‰² ğŸ’¥

- **é¡¹ç›®ï¼š**
  é¡¹ç›®é…ç½®ï¼ˆä¸»é¢˜è‰²ã€èœå•å¸ƒå±€ã€ç³»ç»Ÿ Logoã€é¢åŒ…å±‘...ï¼‰ã€å®Œæ•´çš„ RBAC çš„æƒé™ç®¡ç†ã€‚
- **é¡µé¢ï¼š** é¡µé¢åˆ›å»ºã€é¡µé¢ä¸»é¢˜ã€é¡µé¢é…ç½®ã€ç»„ä»¶æ‹–æ‹½ã€æ ·å¼é…ç½®ã€äº‹ä»¶æµé…ç½®ã€é€»è¾‘ç¼–æ’ã€æ¥å£é…ç½®ã€‚
  é¡µé¢æ”¯æŒé€šè¿‡å¾®æœåŠ¡çš„æ–¹å¼é›†æˆåˆ°ä¼ ç»Ÿé¡¹ç›®ä¸­ï¼Œæ— è®ºä½ æ˜¯ Vue è¿˜æ˜¯ Reactã€‚
- **æƒé™ï¼š** é¡¹ç›®å’Œé¡µé¢æ”¯æŒå¼€å‘è€…å’Œè®¿é—®è€…æƒé™é…ç½®ï¼Œé¡¹ç›®è¿˜æ”¯æŒèœå•ã€æŒ‰é’®çº§åˆ«çš„ RBAC æ§åˆ¶ã€‚
- **è‡ªå®šä¹‰ç»„ä»¶ï¼š** å½“å¹³å°æä¾›çš„ç»„ä»¶æ»¡è¶³ä¸äº†éœ€æ±‚æ—¶ï¼Œå¯ä»¥è‡ªå®šä¹‰å¼€å‘ä¸šåŠ¡ç»„ä»¶ï¼Œå¹³å°ä¼šåœ¨çº¿ç¼–è¯‘ï¼Œä¸Šä¼ åˆ°äº‘ç«¯ï¼ŒåŒæ—¶åœ¨ç¼–è¾‘å™¨ç•Œé¢è‡ªå®šä¹‰ç»„ä»¶ä¸­å¯ä»¥ç‚¹å‡»è¿›è¡ŒåŠ è½½ã€‚
- **æ¥å£ï¼š** æ¥å£ç»Ÿä¸€ç®¡ç†ï¼Œå…¨å±€æ‹¦æˆªå™¨ã€è¿”å›ç»“æ„ä¿®æ”¹ç­‰ã€‚æ”¯æŒ GETã€POSTã€PUTã€DELETE ç­‰è¯·æ±‚æ–¹å¼ï¼Œæ”¯æŒæ¥å£åŠ¨æ€å‚æ•°ä¼ é€’ã€‚
- **äº‹ä»¶æµï¼š** é€šè¿‡äº‹ä»¶æµå¯ä»¥å®Œæˆé«˜éš¾åº¦çš„ä¸šåŠ¡é€»è¾‘ç¼–æ’ï¼Œæ¯”å¦‚ï¼šç»„ä»¶è”åŠ¨ã€ç»„ä»¶æ˜¾éšã€ç»„ä»¶ç¦ç”¨ã€è‡ªå®šä¹‰é€»è¾‘å¤„ç†ã€æ¥å£è°ƒç”¨ã€è·¯ç”±è·³è½¬ç­‰ã€‚
- **ç¯å¢ƒï¼š** å¹³å°æ”¯æŒä¸‰å¥—ç¯å¢ƒï¼ŒSTGã€PRE å’Œ PRDï¼Œé¡µé¢åªæœ‰å‘å¸ƒåˆ°å¯¹åº”ç¯å¢ƒåï¼Œæ‰å¯ä»¥åœ¨ç”¨æˆ·ç«¯è®¿é—®åˆ°è¯¥é¡µé¢ã€‚
- **å›æ»šï¼š** å¹³å°å‘å¸ƒåçš„é¡µé¢æ”¯æŒä¸€é”®å›æ»šã€‚
- **å¾®æœåŠ¡ï¼š** å¦‚æœä½ æ˜¯ä¼ ç»Ÿçš„ Vue é¡¹ç›®ï¼Œæƒ³ä½¿ç”¨æ­¤å¹³å°ï¼Œå¯ä»¥å…ˆåœ¨å¹³å°æ­å»ºä¸€ä¸ªé¡µé¢å‘å¸ƒåˆ° PRD ç¯å¢ƒï¼Œæœ€åé€šè¿‡å¾®æœåŠ¡é›†æˆè¿›æ¥ã€‚
- åç«¯æä¾› JAVA(æœ¬ä»“åº“ï¼Œå±äºç¤¾åŒºæ”¯æ’‘) å’Œ Nodejsï¼ˆå®˜æ–¹æ”¯æ’‘ï¼‰ ä¸¤ä¸ªç‰ˆæœ¬ï¼Œæ•°æ®åº“ä¸º Mysqlã€‚

## æœ¬åœ°å¼€å‘ ğŸ‘¨â€ğŸ’»

### å‰ç«¯ä»“åº“

```bash
# å…‹éš†ä»£ç 
git clone https://github.com/JackySoft/marsview.git
```

# ä¸€ã€å¯åŠ¨å…¥å£
> MarsViewApplication.java

# äºŒã€è¿è¡Œé…ç½®
- `application.yml`
## é‚®ç®±ã€éå¿…é¡»ã€‘
```yaml
spring:
  #é‚®ç®±é…ç½®
  mail:
    #ç¤ºä¾‹ï¼šsmtp.qq.com
    host:
    #ç¤ºä¾‹ï¼šmarsview@qq.com
    username:
    #ç¤ºä¾‹ï¼šnqmblqofepasgjhdï¼Œqqé‚®ç®±è·å–https://service.mail.qq.com/detail/0/75
    password:
    properties: { 'mail.smtp.ssl.enable', true }
    #å¦‚æœå¯åŠ¨å°±æ£€æŸ¥é‚®ç®±é…ç½®æ˜¯å¦è¿æ¥æ­£å¸¸é…ç½®ä¸ºtrue
    test-connection: false
    protocol: smtps
    port: 465

```

## redisã€å¿…é¡»ã€‘
```yaml
spring:
  #redisé…ç½®
  data:
    redis:
      host: 192.168.6.3
      port: 6379
      password:
      database: 7
```
## æ•°æ®åº“ã€å¿…é¡»ã€‘
```yaml
spring:
  datasource:
    url: jdbc:mysql://192.168.6.3:3308/mars?useUnicode=true&characterEncoding=utf-8&serverTimezone=Asia/Shanghai
    username: root
    password: yang
    driver-class-name: com.mysql.cj.jdbc.Driver
```



# ä¸‰ã€äº‘å­˜å‚¨
## é…ç½®
- `pom.xml`
```xml
<dependency>
    <groupId>io.github.yangshare</groupId>
    <artifactId>simpleFS</artifactId>
    <version>1.0.6</version>
    <scope>system</scope>
    <systemPath>${project.basedir}/lib/simpleFS-1.0.6.jar</systemPath>
</dependency>
<!--è¿™é‡Œä»¥ä¸ƒç‰›äº‘ossä¸ºä¾‹ï¼Œå…¶ä»–äº‘å­˜å‚¨ç±»ä¼¼-->
<dependency>
     <groupId>com.qiniu</groupId>
      <artifactId>qiniu-java-sdk</artifactId>
      <version>7.17.0</version>
</dependency>
```
- `application-oss.yml`
```yaml
simple-fs:
  local:
    local-file-path: æœ¬åœ°è·¯å¾„
    local-url: æœ¬æœºè®¿é—®åœ°å€
  oss:
    access-key: é˜¿é‡Œäº‘OSSæˆæƒAK
    secret-key: é˜¿é‡Œäº‘OSSæˆæƒSK
    endpoint: é˜¿é‡Œäº‘OSSåœ°åŸŸ
    domain-url: é˜¿é‡Œäº‘OSSè®¿é—®åœ°å€
    bucket-name: é˜¿é‡Œäº‘OSSç©ºé—´åç§°
  fast:
    user-name: FASTDFSç”¨æˆ·å
    pass-word: FASTDFSå¯†ç 
    server-url: FASTDFSä¸Šä¼ åœ°å€
    domain-url: FASTDFSè®¿é—®åœ°å€
  huawei:
    access-key: åä¸ºå¯¹è±¡å­˜å‚¨æˆæƒAK
    secret-key: åä¸ºå¯¹è±¡å­˜å‚¨æˆæƒSK
    endpoint: åä¸ºå¯¹è±¡å­˜å‚¨åœ°åŸŸ
    domain-url: åä¸ºå¯¹è±¡å­˜å‚¨è®¿é—®åœ°å€
    bucket-name: åä¸ºå¯¹è±¡å­˜å‚¨ç©ºé—´åç§°
  bos:
    access-key: ç™¾åº¦bosæˆæƒAK
    secret-key: ç™¾åº¦bosæˆæƒSK
    endpoint: ç™¾åº¦bosåœ°åŸŸ
    domain-url: ç™¾åº¦bosè®¿é—®åœ°å€
    bucket-name: ç™¾åº¦bosç©ºé—´åç§°
  qcloud:
    access-key: è…¾è®¯äº‘cosæˆæƒAK
    secret-key: è…¾è®¯äº‘cosæˆæƒSK
    endpoint: è…¾è®¯äº‘cosåœ°åŸŸ
    domain-url: è…¾è®¯äº‘cosè®¿é—®åœ°å€
    bucket-name: è…¾è®¯äº‘cosç©ºé—´åç§°
    region: è…¾è®¯äº‘cosåœ°åŸŸ
  qiniu:
    access-key: ä¸ƒç‰›äº‘æˆæƒAK
    secret-key: ä¸ƒç‰›äº‘æˆæƒSK
    domain-url: ä¸ƒç‰›äº‘è®¿é—®åœ°å€
    bucket-name: ä¸ƒç‰›äº‘ç©ºé—´åç§°
    region: ä¸ƒç‰›äº‘åœ°åŸŸ
  upai:
    user-name: åˆæ‹äº‘ç”¨æˆ·å
    pass-word: åˆæ‹äº‘å¯†ç 
    domain-url: åˆæ‹äº‘è®¿é—®åœ°å€
    bucket-name: åˆæ‹äº‘ç©ºé—´åç§°
  smms:
    user-name: smmsç”¨æˆ·å
    token: smms-Token
    pass-word: smmså¯†ç 
  github:
    repository: githubä»“åº“
    user: githubç”¨æˆ·å
    token: githubToken
  aws:
    access-key: AWSæˆæƒAK
    secret-key: AWSæˆæƒSK
    endpoint: AWSåœ°åŸŸ
    bucket-name: AWSç©ºé—´åç§°
    region: AWSåœ°åŸŸ
    domain-url: AWSè®¿é—®åœ°å€
```
> ç”¨åˆ°å“ªå®¶osså°±é…ç½®å“ªå®¶å³å¯ï¼Œä»£ç æ€ä¹ˆåˆ¤æ–­çš„çœ‹ä¸‹é¢ã€å¼€å‘ã€‘ç« èŠ‚ã€‚

## å¼€å‘
> [å‚è€ƒæ–‡æ¡£](https://github.com/yangshare/simpleFS)

- ä¸ƒç‰›äº‘OSSæœ€ä½³å®è·µ
```yaml
simple-fs:
    qiniu:
      access-key: C9bwMJW-OKAçŒœçŒœæˆ‘æ”¹äº†ä»€ä¹ˆ31inE_fGg
      secret-key: tVMWV8AU6J4kxbAçŒœçŒœæˆ‘æ”¹äº†ä»€ä¹ˆEuSn-1Vb
      domain-url: https://oss.yangshare.com
      bucket-name: yangshare-blog
      region: z2
```

```java
package com.zhouzifei.oss;

import com.zhouzifei.tool.config.QiniuFileProperties;
import com.zhouzifei.tool.config.SimpleFsProperties;
import com.zhouzifei.tool.consts.StorageTypeConst;
import com.zhouzifei.tool.dto.VirtualFile;
import com.zhouzifei.tool.listener.ProgressListener;
import com.zhouzifei.tool.service.ApiClient;
import com.zhouzifei.tool.service.FileUploader;
import lombok.SneakyThrows;
import org.junit.jupiter.api.Test;
import org.springframework.beans.factory.annotation.Autowired;
import org.springframework.boot.autoconfigure.SpringBootApplication;
import org.springframework.boot.test.context.SpringBootTest;
import org.springframework.test.context.ActiveProfiles;
import org.springframework.util.ResourceUtils;

import java.io.FileInputStream;

@SpringBootApplication(scanBasePackages = "com.zhouzifei.*")
@SpringBootTest
@ActiveProfiles("oss")
public class OssTemplateTest {

    @Autowired
    private SimpleFsProperties simpleFsProperties;

    /**
     * æµ‹è¯•ç”¨æ–‡ä»¶å,è¯¥æ–‡ä»¶åœ¨æµ‹è¯•èµ„æºæ–‡ä»¶å¤¹ä¸‹
     */
    private static final String TEST_OBJECT_NAME = "test.txt";

    @Test
    @SneakyThrows
    public void test() {
        System.out.println(simpleFsProperties);
        ProgressListener progressListener = new ProgressListener() {
            @Override
            public void start(String s) {
                System.out.println("å¼€å§‹ä¸Šä¼ ");
            }

            @Override
            public void process(int i, int i1) {
                System.out.println("i=" + i);
                System.out.println("i1=" + i1);
            }

            @Override
            public void end(VirtualFile virtualFile) {
                System.out.println("ä¸Šä¼ å®Œæˆ");
                System.out.println(virtualFile);

            }
        };
        QiniuFileProperties qiniuFileProperties = simpleFsProperties.getQiniu();
        System.out.println(qiniuFileProperties);

        String domainUrl = qiniuFileProperties.getDomainUrl();
        String accessKey = qiniuFileProperties.getAccessKey();
        String secretKey = qiniuFileProperties.getSecretKey();
        String region = qiniuFileProperties.getRegion();
        String bucketName = qiniuFileProperties.getBucketName();
        String storageType = StorageTypeConst.QINIUYUN.getStorageType();
        
        FileUploader uploader = FileUploader.builder()
                .simpleFsProperties(simpleFsProperties)
                .progressListener(progressListener)
                .domainUrl(domainUrl)
                .accessKey(accessKey)
                .secretKey(secretKey)
                .region(region)
                .bucketName(bucketName)
                .storageType(storageType)
                .build();

        ApiClient apiClient = uploader.execute();


        FileInputStream file = new FileInputStream(ResourceUtils.getFile(ResourceUtils.CLASSPATH_URL_PREFIX + TEST_OBJECT_NAME));

        VirtualFile virtualFile = apiClient.uploadFile(file, TEST_OBJECT_NAME);
        System.out.println(virtualFile.getFullFilePath());
        System.out.println(virtualFile.getFileHash());


    }

}

```
# éƒ¨ç½²
> éƒ¨ç½²æ–¹å¼äºŒé€‰ä¸€ï¼štomcatã€docker
## tomcat
1. å‡†å¤‡å·¥ä½œ
- å®‰è£… JDKï¼šç¡®ä¿å·²å®‰è£… JDKï¼Œå¹¶é…ç½®å¥½ç¯å¢ƒå˜é‡ã€‚
- å®‰è£… Tomcatï¼šä¸‹è½½å¹¶è§£å‹ Tomcat åˆ°æŒ‡å®šç›®å½•ã€‚
2. ä¿®æ”¹ Spring Boot é¡¹ç›®pom.xmlæ–‡ä»¶
```xml
<packaging>war</packaging> <!-- ä¿®æ”¹è¿™é‡Œä¸º war -->
```
3. æ‰“åŒ…é¡¹ç›®
- æ‰“åŒ…æˆ WAR æ–‡ä»¶ï¼šåœ¨é¡¹ç›®æ ¹ç›®å½•ä¸‹è¿è¡Œä»¥ä¸‹å‘½ä»¤ã€‚
```shell
mvn clean package
```
- æ‰¾åˆ° WAR æ–‡ä»¶ï¼šæ‰“åŒ…å®Œæˆåï¼ŒWAR æ–‡ä»¶ä¼šç”Ÿæˆåœ¨ target ç›®å½•ä¸‹ã€‚
4. éƒ¨ç½²åˆ° Tomcat
- å°† WAR æ–‡ä»¶å¤åˆ¶åˆ° Tomcat çš„ webapps ç›®å½•ï¼š
```shell
cp target/your-app.war /path/to/tomcat/webapps/
```
- å¯åŠ¨ Tomcatï¼š
```shell
tomcatå®‰è£…ç›®å½•/bin/startup.sh
```
5. è®¿é—®åº”ç”¨
- æ‰“å¼€æµè§ˆå™¨ï¼Œè®¿é—® http://localhost:9001/
## docker
1. æ„å»º Docker é•œåƒ
- åœ¨åŒ…å« Dockerfile çš„ç›®å½•ä¸‹æ‰§è¡Œä»¥ä¸‹å‘½ä»¤æ„å»º Docker é•œåƒï¼š
```sh
git clone https://github.com/JackySoft/marsview-backend.git
cd marsview-backend/java
docker build -t marsview4j:latest	
```
2. è¿è¡Œ Docker å®¹å™¨
- ä½¿ç”¨ä»¥ä¸‹å‘½ä»¤å¯åŠ¨ Docker å®¹å™¨ï¼Œå¹¶æŒ‚è½½é…ç½®æ–‡ä»¶ç›®å½•ï¼š
```sh
docker run -d -p 9001:9001 -v /å®¿ä¸»æœºè·¯å¾„/conf:/app/conf marsview4j:latest
``` 
- -d è¡¨ç¤ºåå°è¿è¡Œã€‚
- -p 9001:9001 å°†å®¹å™¨çš„ 9001 ç«¯å£æ˜ å°„åˆ°å®¿ä¸»æœºçš„ 9001 ç«¯å£ã€‚
- -v /å®¿ä¸»æœºè·¯å¾„/conf:/app/conf å°†å®¿ä¸»æœºçš„é…ç½®æ–‡ä»¶ç›®å½•æŒ‚è½½åˆ°å®¹å™¨çš„ /app/conf ç›®å½•ã€‚
3. è®¿é—®åº”ç”¨
- æ‰“å¼€æµè§ˆå™¨ï¼Œè®¿é—® http://localhost:9001/
# è´¡çŒ®

 > æ¬¢è¿å¤§å®¶è´¡çŒ®ä»£ç ï¼Œæäº¤PRã€‚

## ä»£ç è§„èŒƒ
åªæœ‰ä¸¤æ¡è§„åˆ™
- ä»£ç å°½é‡ç”Ÿæˆå™¨ï¼Œä¸è¦æ‰‹å†™ã€‚[ä»£ç ç”Ÿæˆ](https://baomidou.com/guides/mybatis-x/#%E4%BB%A3%E7%A0%81%E7%94%9F%E6%88%90)
- æ‰‹å†™ä»£ç è¯·éµç…§[ã€Šé˜¿é‡Œå·´å·´Javaå¼€å‘æ‰‹å†Œï¼ˆç»ˆæç‰ˆï¼‰ã€‹](https://developer.aliyun.com/ebook/386/read)ï¼Œæ¥å£æ·»åŠ æ–‡æ¡£æ³¨è§£[Knife4j](https://doc.xiaominfo.com/)

## prè§„èŒƒ
ä¸ç”¨ç ”ç©¶prè§„èŒƒï¼ˆå‘èµ·prè‡ªç„¶å°±æœ‰æ¨¡æ¿ï¼‰ï¼Œæäº¤prä¹‹å‰å…ˆforké¡¹ç›®ï¼Œç„¶ååœ¨è‡ªå·±çš„ä»“åº“é‡Œ`Open a pull request`
![img.png](doc/img.png)
